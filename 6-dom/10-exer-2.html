<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Exer 2</title>
    <script>
        "use strict";

        /*
         * # Exer 2
         */
        document.addEventListener("DOMContentLoaded", function () {
            const checkAllCheckbox = document.getElementById("check-all");
            const allBtn = document.getElementById("all");
            const cancelBtn = document.getElementById("cancel");
            const reverseBtn = document.getElementById("reverse");
            const submitBtn = document.getElementById("submit");
            const hobbies = document.getElementsByName("hobby");

            function selectAll() {
                for (let hobby of hobbies) {
                    hobby.checked = true;
                }
            }

            function deselectAll() {
                for (let hobby of hobbies) {
                    hobby.checked = false;
                }
            }

            function updateState() {
                let status = true;

                for (let hobby of hobbies) {
                    if (!hobby.checked) {
                        status = false;
                        break;
                    }
                }

                checkAllCheckbox.checked = status;
            }

            for (let hobby of hobbies) {
                hobby.addEventListener("change", updateState);
            }

            checkAllCheckbox.addEventListener("change", () => {
                if (checkAllCheckbox.checked) {
                    selectAll();
                } else {
                    deselectAll();
                }
            });
            allBtn.addEventListener("click", () => {
                selectAll();
                checkAllCheckbox.checked = true;
            });
            cancelBtn.addEventListener("click", () => {
                deselectAll();
                checkAllCheckbox.checked = false;
            });
            reverseBtn.addEventListener("click", () => {
                for (let hobby of hobbies) {
                    hobby.checked = !hobby.checked;
                }

                updateState();
            });
            submitBtn.addEventListener("click", () => {
                const checkedHobbies = [];
                for (let hobby of hobbies) {
                    if (hobby.checked) {
                        checkedHobbies.push(hobby.getAttribute("value"));
                    }
                }
                alert(`选中的爱好：${checkedHobbies.join("、")}`);
            });
        });
    </script>
</head>
<body>
<form action="#">
    <p>选择你的爱好：</p>
    <div>
        <label for="check-all">全选</label>
        <input id="check-all" name="check-all" type="checkbox">
    </div>
    <div>
        <label>
            兵乓球
            <input name="hobby" type="checkbox" value="兵乓球">
        </label>
        <label>
            篮球
            <input name="hobby" type="checkbox" value="篮球">
        </label>
        <label>
            羽毛球
            <input name="hobby" type="checkbox" value="羽毛球">
        </label>
        <label>
            足球
            <input name="hobby" type="checkbox" value="足球">
        </label>
    </div>
    <div>
        <button id="all" type="button">
            全选
        </button>
        <button id="cancel" type="button">
            取消
        </button>
        <button id="reverse" type="button">
            反选
        </button>
        <button id="submit" type="button">
            提交
        </button>
    </div>
</form>
</body>
</html>
